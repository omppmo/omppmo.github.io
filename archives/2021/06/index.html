<!DOCTYPE html>
<html>
<head hexo-theme='https://volantis.js.org/#2.6.5'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
      <meta name="robots" content="noindex,follow">
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
    <title>Archive: 2021/6 - omp&#39;s blog</title>
  
  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  

  <!-- import link -->
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
<script src="https://cdn.jsdelivr.net/gh/zyoushuo/Blog/hexo/js/mouse_click.js"></script>

  
  <div class="cover-wrapper">
    
      <cover class='cover  half'>
        <div class='cover-body'>
  <div class='a'>
    
    
      <p class="title">omp's blog</p>
    
    
      <p class="subtitle">一个密码学小白的学习之路</p>
    
  </div>
  <div class='b'>
    
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <input type="text" class="input u-search-input" placeholder="" />
          <i class="icon fas fa-search fa-fw"></i>
        </form>
      </div>
    
    <div class='menu navigation'>
      <ul class='cover-list-h'>
        
          
            <li>
              <a class="nav home"
                href="/archives/"
                
                
                id="archives">
                <i class='fas fa-book fa-fw'></i>文档
              </a>
            </li>
          
            <li>
              <a class="nav home"
                href="/"
                
                
                id="home">
                <i class='fas fa-rss fa-fw'></i>博文
              </a>
            </li>
          
        
      </ul>
    </div>
  </div>
</div>

      </cover>
    
    <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<header class="l_header shadow blur">
  <div class='container'>
  <div class='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h'>
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
          
            omp's blog
          
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h'>
          
          
          
            
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>

			<ul class='switcher nav-list-h'>
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      

<div class='l_main'>
	
		
  <section class="post-list ">
    
      
        
          
        
      
    
    
      
        
          <div class='post-wrapper'>
            <article class="post white-box shadow reveal ">
  


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h2 class="title">
    <a href="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/">
      网络攻防
    </a>
  </h2>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="" rel="nofollow">
    <img src="https://ae01.alicdn.com/kf/H68ac7f1be81b4260813ba8136aef8160J.jpg">
    <p>omp</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>学习笔记</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：Jun 6, 2021</p>
  </a>
</div>

            
          
            
              

            
          
            
              
  <div class="new-meta-item browse valine">
    <a class='notlink'>
      <i class="fas fa-eye fa-fw" aria-hidden="true"></i>
      <span id="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/" class="leancloud_visitors" data-flag-title="网络攻防">
      <p>
        <span class="leancloud-visitors-count"></span>
      </p>
      </span>
    </a>
  </div>


            
          
            
          
            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


  <section class="article typo">
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="网络攻防原理"><a href="#网络攻防原理" class="headerlink" title="网络攻防原理"></a>网络攻防原理</h1><h2 id="class1"><a href="#class1" class="headerlink" title="class1"></a>class1</h2><blockquote>
<p>vWeb安全资料<br>§<a href="https://pan.baidu.com/s/1bg1G6uo9b6UT2Y-E4dnaSQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1bg1G6uo9b6UT2Y-E4dnaSQ</a><br>§密码:0ub7<br>vKali百度云链接<a href="https://pan.baidu.com/s/1Ty4QhRLm3707Cxvzivh8fw" target="_blank" rel="noopener">https://pan.baidu.com/s/1Ty4QhRLm3707Cxvzivh8fw</a> 密码:u4a0<br>vWin2008server链接<a href="https://pan.baidu.com/s/1eML7NoyWBN0Zr26_DLoSYw" target="_blank" rel="noopener">https://pan.baidu.com/s/1eML7NoyWBN0Zr26_DLoSYw</a> 密码:2dta</p>
</blockquote>
<p>www.shodan.io 工控设备具体分布</p>
<h2 id="class2"><a href="#class2" class="headerlink" title="class2"></a>class2</h2><h3 id="渗透测试流程"><a href="#渗透测试流程" class="headerlink" title="渗透测试流程"></a>渗透测试流程</h3><p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210311120114130.png" alt="image-20210311120114130"></p>
<p>①信息收集</p>
<p>②网络隐身:让对方发掘不到攻击者的地址，无法溯源</p>
<p>（对攻击来说是必须的，但对渗透测试可以不做）</p>
<p>③端口和漏洞扫描</p>
<p>④攻击实施</p>
<p>⑤提权</p>
<p>⑥设置后门</p>
<p>如果入侵的漏洞被修复，可以使用后门绕过目前利用的漏洞</p>
<p>⑦清除痕迹</p>
<p>应用的日志会将攻击细节记录(渗透测试可以不做)</p>
<h4 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h4><p><strong>收集的信息</strong></p>
<ul>
<li><p>网络接入方式：拨号接入、无线局域网接入、以太网接入、VPN远程接入等</p>
</li>
<li><p>目标网络信息：域名范围、IP地址范围、具体地理位置等</p>
</li>
<li><p>网络拓扑结构：交换设备类型、设备生产厂家、传输网络类型等</p>
<p>（路由器，二级交换机，三级交换机…）</p>
</li>
<li><p>网络用户信息：邮件地址范围、用户账号密码等</p>
</li>
</ul>
<h4 id="网络隐身"><a href="#网络隐身" class="headerlink" title="网络隐身"></a>网络隐身</h4><p><strong>IP假冒或盗用</strong></p>
<p>TCP/IP协议不检查源IP地址(32位)，只检查目的地址，修改IP地址绕过访问控制黑名单</p>
<p><strong>MAC地址盗用</strong></p>
<p>修改自身主机的MAC地址(数据链路层)为允许访问的MAC地址 IP是逻辑地址(网络层)，MAC(48位)是硬件地址</p>
<p>MAC地址分为两段，0~23位是国际化组织分配给网卡制造商的  24~47位是生产商生产网卡的编号，这48位在出厂就固化在网卡中了</p>
<p>通过技术手段修改这48位，只改变表象，不改变本质</p>
<p>通过ARP协议把IP翻译为MAC地址</p>
<p><strong>代理隐藏</strong></p>
<p>通过免费代理进行信息收集，甚至通过多个代理级联</p>
<p>因为中国长城防火墙，所以国内ip无法访问谷歌。新加坡的服务器能正常访问谷歌，可以在PC上设置代理，先把发往谷歌的数据包发给代理，由代理转给谷歌。</p>
<p>对谷歌而言，知道当前流量连接来自新加坡的服务器，而不知道我们的PC地址。</p>
<p><strong>冒充真实用户</strong></p>
<p>监听或破解用户的账号和口令，然后冒充该账户</p>
<p><strong>僵尸机器</strong></p>
<p>入侵僵尸主机，并通过该主机进行攻击</p>
<p>如果计算机被攻击者获得相应权限后，攻击者可以利用你的计算机进行攻击。</p>
<p>被攻击方如果进行溯源，首先找到你的计算机。</p>
<p>例:校园网的网关号不要轻易借给别人，可能在网络上发表不利言论</p>
<h4 id="网络扫描"><a href="#网络扫描" class="headerlink" title="网络扫描"></a>网络扫描</h4><p>传输层TCP UDP 这两个协议都有0-65535个端口</p>
<p>通过端口和应用层各种应用建立联系</p>
<p>常使用的端口 http默认端口80   https默认端口443  ftp默认21 </p>
<p>http https ftp都是应用层协议</p>
<p>从应用层到传输层都用TCP协议封装</p>
<p><strong>端口扫描</strong></p>
<ul>
<li><p>检测有关端口是打开还是关闭</p>
<p>可以得到具体的攻击路径</p>
</li>
<li><p>判定目标端口运行的服务类型和版本信息</p>
<p>检测开放哪些端口，判断相应服务类型</p>
</li>
<li><p>识别不同操作系统的类型和版本</p>
</li>
</ul>
<p>linux中shadow存放加密后的口令，passwd文件存放用户信息</p>
<p>shadow文件需要root权限可以读取</p>
<p><strong>漏洞扫描</strong></p>
<ul>
<li><p>专用的漏洞扫描工具如Openvas、APPScan等</p>
</li>
<li><p>WEB应用程序的漏洞扫描如Nikto、W3AF等</p>
</li>
</ul>
<h4 id="攻击或渗透测试"><a href="#攻击或渗透测试" class="headerlink" title="攻击或渗透测试"></a>攻击或渗透测试</h4><p><strong>拒绝服务攻击</strong></p>
<p>危害极大，导致服务器不能正常提供相应服务</p>
<p><strong>获取访问权限</strong></p>
<p>利用远程漏洞进行远程入侵，获得目标系统的一个普通用户权限  获得权限比较低</p>
<p><strong>提升访问权限</strong></p>
<p>配合本地漏洞把获得的权限进行提升，提升为管理员的最高权限</p>
<p>暴力破解管理员口令、检测系统配置错误、网络监听或设置钓鱼木马</p>
<h4 id="放置后门"><a href="#放置后门" class="headerlink" title="放置后门"></a>放置后门</h4><p>开放不安全的服务端口</p>
<p>修改系统配置</p>
<p>安装网络嗅探器</p>
<p>建立隐藏通道</p>
<p>创建具有root权限的虚假用户账号</p>
<p>安装批处理文件</p>
<p>安装远程控制木马：灰鸽子</p>
<h4 id="清除痕迹"><a href="#清除痕迹" class="headerlink" title="清除痕迹"></a>清除痕迹</h4><p>不能把整个日志全部删除，删除和自己有关的信息</p>
<p><strong>清除登录日志和其它有关记录</strong></p>
<ul>
<li><p>隐藏上传的文件</p>
</li>
<li><p>修改日志文件中的审计信息</p>
</li>
<li><p>修改系统时间造成日志文件数据紊乱</p>
</li>
<li><p>删除或停止审计服务进程</p>
</li>
<li><p>干扰入侵检测系统正常运行</p>
</li>
<li><p>修改完整性检测数据</p>
</li>
<li><p>使用Rootkits工具</p>
</li>
</ul>
<p><strong>Windows的系统日志—“%systemroot%\system32\config”</strong></p>
<h3 id="Kali"><a href="#Kali" class="headerlink" title="Kali"></a>Kali</h3><p>Metasploit 渗透测试的框架，相当于狙击枪（kali的核心内容）</p>
<p>kali2020默认用户 kali 默认口令kali</p>
<p>此时权限较低 激活root账号</p>
<h4 id="修改网络设置"><a href="#修改网络设置" class="headerlink" title="修改网络设置"></a>修改网络设置</h4><h5 id="设置静态ip地址"><a href="#设置静态ip地址" class="headerlink" title="设置静态ip地址"></a>设置静态ip地址</h5><p>上方时间后图标右击Edit Connection-&gt;左下角设置</p>
<p>若使用静态IP，把Method改为手动(Manual)</p>
<p>Add Address NetMask Gateway(网关)</p>
<p><code>ifconfig</code>查询ip地址 查看配置是否生效</p>
<p>Linux中网卡信息若发生改变，不会立刻生效。需要先将网卡停用后再启用</p>
<p>在图标点击断开连接 再启动Wired Connection1，地址才会生效</p>
<p>一般不要手动设置地址，自动获取即可</p>
<h5 id="查看ip地址"><a href="#查看ip地址" class="headerlink" title="查看ip地址"></a>查看ip地址</h5><p><code>ifconfig</code></p>
<p>两个网卡eth0/lo</p>
<p>lo是本地回环网卡，用于测试本地网卡能否正常工作</p>
<p>ip为127.0.0.1</p>
<h5 id="VMware网络连接模式"><a href="#VMware网络连接模式" class="headerlink" title="VMware网络连接模式"></a>VMware网络连接模式</h5><p>安装VMware后，网络设置中多了vmnet0/vmnet1/vmnet8等</p>
<p>这是三种上网方式，虚拟出来的三个交换机</p>
<p>编辑-&gt;虚拟网络编辑器(若缺少相应的虚拟交换机如VMnet0，可自行添加)</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210311174959481.png" alt="image-20210311174959481"></p>
<p>桥接模式:启动了一台虚拟机相当于拥有两台电脑</p>
<p>物理主机有ip地址，虚拟主机也有ip地址</p>
<p>虚拟机通过虚拟网卡练到虚拟交换机VMnet0，用主机的网卡上网</p>
<p>NAT模式:虚拟机之间、主机与虚拟机之间互访，==虚拟机可通过主机访问外网，外网无法访问虚拟机。==</p>
<p>仅主机模式:虚拟机之间、主机与虚拟机之间互访，虚拟机无法访问外网。</p>
<h4 id="更新源"><a href="#更新源" class="headerlink" title="更新源"></a>更新源</h4><p>源是kali的官网(外网)，若包比较大，会经常中断</p>
<p>修改源为国内源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/apt/sources.list</span><br><span class="line">deb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line">deb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib</span><br><span class="line">apt-get update</span><br></pre></td></tr></table></figure>
<h3 id="搭建漏洞环境"><a href="#搭建漏洞环境" class="headerlink" title="搭建漏洞环境"></a>搭建漏洞环境</h3><p>Kali或其它主机要跟Metasploitable2在同一个网段，要么都用桥接，要么都用NAT（就算在同一网段，一个NAT一个桥接也不行）</p>
<p>Metasploitable2登陆用户名/密码：msfadmin/msfadmin，但权限较低，可修改</p>
<p>metasploitable使用http,输入ip地址查看是否能访问成功</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210313124234394.png" alt="image-20210313124234394"></p>
<h3 id="信息收集-1"><a href="#信息收集-1" class="headerlink" title="信息收集"></a>信息收集</h3><p>又称网络踩点(footprinting)，指攻击者通过各种途径对要攻击的目标进行有计划和有步骤的信息收集，从而了解目标的==网络环境和信息安全状况==的过程。</p>
<p><strong>目标网络</strong></p>
<ul>
<li>域名、IP地址、DNS服务器、邮件服务器、网络拓扑结构</li>
</ul>
<p><strong>目标个人</strong></p>
<ul>
<li>身份信息、联系方式、职业或其它隐私信息</li>
</ul>
<p><strong>踩点方法</strong></p>
<ul>
<li><p>注册机构Whois查询</p>
</li>
<li><p>DNS和IP信息收集</p>
</li>
<li><p>WEB信息搜索与挖掘</p>
</li>
<li><p>网络拓扑侦察</p>
</li>
<li><p>网络监听</p>
</li>
</ul>
<h4 id="第一部分-域名系统"><a href="#第一部分-域名系统" class="headerlink" title="第一部分 域名系统"></a>第一部分 域名系统</h4><p>我们的上网过程中使用的是32位的IPv4（点分十进制）</p>
<p>为了方便 我们使用带有一定含义的域名来标识某个ip</p>
<h5 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h5><p>Domain Name System 域名服务器</p>
<p>完成的是域名和ip的映射</p>
<p>域名系统是因特网的一项服务，作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便的访问互联网。DNS使用TCP和UDP端口53。</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210313125050606.png" alt="image-20210313125050606"></p>
<h5 id="域名记录类型"><a href="#域名记录类型" class="headerlink" title="域名记录类型"></a>域名记录类型</h5><p><strong>A记录</strong>：主机记录，是使用最广泛的DNS记录；</p>
<p>完成域名-&gt;IP映射</p>
<p><strong>NS记录</strong>：也称为域名服务器记录，用于说明这个区域==有哪些DNS服务器承担解析==的任务；</p>
<p><strong>Cname记录：</strong>别名记录；</p>
<p><strong>PTR记录</strong>：反向地址解析记录，作用是把IP地址解析为域名</p>
<p>IP-&gt;域名映射  和A记录相反</p>
<h5 id="域名的等级"><a href="#域名的等级" class="headerlink" title="域名的等级"></a>域名的等级</h5><p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210313125503780.png" alt="image-20210313125503780"></p>
<p>主机提供了www服务 </p>
<p>在域名中越靠后级别越高</p>
<p>cn顶级域 com二级域 sina三级域(组织机构名)</p>
<h5 id="域名解析示意—迭代"><a href="#域名解析示意—迭代" class="headerlink" title="域名解析示意—迭代"></a>域名解析示意—迭代</h5><p>如果查询的DNS服务器中没有对应的ip地址:</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210313125724339.png" alt="image-20210313125724339"></p>
<p>根域名服务器:最高级别的，他无所不知，只管大事，细节不管。</p>
<p>com顶级域名服务器:com是顶级，google是二级</p>
<p>对应返还后，本地域名服务器将对应关系存储到DNS高速缓存中</p>
<p><strong>DNS域名解析基本过程</strong></p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210313130354066.png" alt="image-20210313130354066"></p>
<p>13套根服务器中，1套主根，12套副根</p>
<h5 id="DNS收集信息—whois"><a href="#DNS收集信息—whois" class="headerlink" title="DNS收集信息—whois"></a>DNS收集信息—whois</h5><p>目前教育网的查不了，只能查询公网的</p>
<p>直接百度whois查询，找到相关信息</p>
<p>在whois查询中，注册人姓名和邮箱信息，所有人往往就是管理员。</p>
<p><strong>可以通过联系人 联系邮箱进行whois反查，查询更多和联系人或邮箱相关的域名</strong></p>
<h5 id="域名信息查询"><a href="#域名信息查询" class="headerlink" title="域名信息查询"></a>域名信息查询</h5><p>host命令与dig命令</p>
<blockquote>
<p>输入命令名 可以直接回车或-h</p>
<p>查看帮助 具体使用方法</p>
</blockquote>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210313132604236.png" alt="image-20210313132604236"></p>
<ul>
<li><p>host -a hebtu.edu.cn</p>
<p>QUESTION SECTION： hebtu.edu.cn(==要查询的域==)</p>
<p>ANSWER SECTION: ns.hebtu.edu.cn（由这个域名服务器完成域名解析）</p>
<p>此时ping ns.hebtu.edu.cn</p>
<p>返回202.206.100.36 域名服务器的ip地址</p>
</li>
<li><p>host -a www.hebtu.edu.cn(==要查询的主页==)</p>
<p>ANSWER SECTION： </p>
<p>A记录是IPv4 AAAA是IPv6</p>
</li>
<li><p>dig hebtu.edu.cn any</p>
</li>
<li><p>dig baidu.com any</p>
<p>baidu.com和hebtu.edu.cn都是域</p>
</li>
<li><p>host -t mx hebtu.edu.cn</p>
<p>查看谁在处理邮件信息</p>
</li>
<li><p>dig www.hebtu.edu.cn +trace</p>
<p>查看请求发出后 域名完整的请求过程</p>
</li>
</ul>
<h5 id="子域名枚举"><a href="#子域名枚举" class="headerlink" title="子域名枚举"></a>子域名枚举</h5><p>通过主域名得到所有子域名信息，再通过子域名查询其对应的主机IP  <strong>hebtu.edu.cn</strong>（即判断hebtu三级域名下是否还有子域名）</p>
<p>注意:子域名等级越小，在域名中越靠前</p>
<p><strong>dnsenum</strong></p>
<p>子域名字典路径:/usr.share/dnsenum</p>
<p><code>dnsenum</code> -r(使用递归方式枚举) -f(使用字典) /usr/share/dnsenum/dns.txt baidu.com [-o baidu.txt]</p>
<p>功能：获取各种DNS资源记录，根据字典暴力枚举子域名、主机名、C段网络扫描和反向网络查找</p>
<blockquote>
<p>合理使用tab 可以在shell中对命令进行补全</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/share/dnsenum</span><br><span class="line">./dnsenum  -f dns.txt --dnsserver 8.8.8.8 cisco.com -O cisco.txt</span><br></pre></td></tr></table></figure>
<p>-f dns.txt 指定暴力破解文件；<br>—dnsserver 指定dns服务器；如果不加，用目前主机的DNS解析；如果加上，可以指定任何DNS服务器做当前解析<br>cisco.com  为目标域；<br>-O  cisco.txt 输出到文件cisco.txt</p>
<p><strong>dnsrecon</strong></p>
<p><strong>功能：强大的域名信息收集和枚举工具，支持所有域名枚举和域名资源记录查询</strong></p>
<p>用法：dnsrecon -d 目标域名 -D 字典文件 -t {std|brt|axfr}</p>
<p>-t brt 使用内建字典；-t std 默认的标准查询；-t axfr 标准加axfr记录</p>
<p>字典路径 /usr/share/dnsrecon/namelist.txt</p>
<p>每个命令用到字典不同，导致结果不同</p>
<p><strong>fierce</strong></p>
<p>和前面两个功能基本相同，只是命令选项不同（这个速度快）</p>
<p>用法：fierce -dns 目标域名 [-dnsserver 指定DNS] [-range ip地址范围] [-threads 线程数] [-wordlist 字典路径]</p>
<p>fierce -dns hebtu.edu.cn -wordlist ==/usr/share/fierce/hosts.txt==</p>
<h4 id="第二部分-IP信息收集"><a href="#第二部分-IP信息收集" class="headerlink" title="第二部分 IP信息收集"></a>第二部分 IP信息收集</h4><h5 id="内网IP搜索"><a href="#内网IP搜索" class="headerlink" title="内网IP搜索"></a>内网IP搜索</h5><p><strong>ICMP搜索</strong></p>
<p>ICMP互联网控制报文协议 向地址发送request请求，得到对方的responese,说明网络是通的。有缺陷是因为会受到防火墙的影响。nping基于ICMP协议，不一定成功。(ping不通也因为可能是防火墙拦截)</p>
<ul>
<li><p>nping</p>
<p><code>nping -c 1 192.168.43.15/24</code>就在地址段中开始找</p>
<p>/24网络地址前缀，代表32位地址前24为1，代表整个C类地址的网段。若/24则.15写成任意数字都行，因为都代表129.168.43网段中任意地址。</p>
<p><code>nping -c 1 192.168.43.15/25</code> 43.1-43.126</p>
<p><code>nping -c 1 192.168.43.129/25</code> 43.129-43.254</p>
<p>-c 1代表向地址段中每一个地址发送数据包</p>
</li>
</ul>
<p><strong>ARP搜索</strong></p>
<p>ARP协议是ip地址到MAC地址的映射。ARP搜索都是在某一个网段中进行搜索。</p>
<ul>
<li><p>netdiscover</p>
<p><code>netdiscover -r 192.168.43.150/24</code></p>
<p>-r 代表是一个网段</p>
<p>可以搜索到 IP MAC地址 设备类型</p>
</li>
<li><p>nmap</p>
<p>nmap [-PA [端口]] [-PS [端口]] [-PU [端口]] -sn -n 地址范围</p>
<p>-sn: ping扫描- 禁止端口扫描</p>
<p>-sn看目标是否在线，并不会扫描对方的端口</p>
<p>-PS [portlist]: TCP SYN扫描</p>
<p>-PA[portlist]: TCP ACK扫描</p>
<p>TCP报文段中有SYN ACK标志位</p>
<p>-PU [portlist]: UDP 扫描</p>
<p>在nmap中选项区分大小写</p>
<p><code>nmap -n -PS -PA8080 -sn 192.168.1.0/24</code></p>
</li>
<li><p>Cain&amp;Abel</p>
<p>Windows下小工具，自行下载</p>
<p>搜索IP信息 </p>
</li>
</ul>
<h2 id="class3"><a href="#class3" class="headerlink" title="class3"></a>class3</h2><p>1.使用多台虚拟机和主机搭建环境时，设置同一种上网上方式(NAT或桥接)，若不使用同一种方式，即使手动设置ip地址，也是不通的。</p>
<p>2.关于ping:<br>基于ICMP协议，有一些局限性。并不是ping通就代表网络通，不通就代表网络不通。如果对方开启了防火墙，ping会被阻止，所以无法确定网络是否联通。</p>
<p>最简单有效的是nmap,nmap ip 若能扫描出对方的窗口或显示up状态，则说明网络是畅通的。</p>
<h3 id="WEB挖掘分析"><a href="#WEB挖掘分析" class="headerlink" title="WEB挖掘分析"></a>WEB挖掘分析</h3><h4 id="利用搜索引擎"><a href="#利用搜索引擎" class="headerlink" title="利用搜索引擎"></a>利用搜索引擎</h4><p>通过搜索引擎从WEB站点中寻找和搜索攻击目标的相关信息</p>
<p>inurl:admin.asp  incurl:是特定搜索引擎中关键字 意思是在url中进行查找 </p>
<h4 id="目录结构分析"><a href="#目录结构分析" class="headerlink" title="目录结构分析"></a><strong>目录结构分析</strong></h4><ul>
<li><p>HTML、ASP/PHP/JSP/ASPX等源代码及其注释语句</p>
</li>
<li><p>按照内容或功能分理出一些子目录，</p>
</li>
<li><p>许多网站的后台管理目录名字很常见，如admin、cms</p>
</li>
<li><p>特殊后缀文件文件.inc,.bak,.txt,.sql</p>
</li>
<li><p>暴力搜索</p>
</li>
</ul>
<h5 id="利用kali-metasploit"><a href="#利用kali-metasploit" class="headerlink" title="利用kali metasploit"></a>利用kali metasploit</h5><p><code>msfconsole</code> //启动matasploit</p>
<p>共有七个功能模块，每个功能模块前都带有数字，每个数字代表在当前模块中有多少子模块(类似于枪支metasploit的子弹有多少)。</p>
<p>目录 /usr/share/metasploit-framework</p>
<p>对应模块 /usr/share/metasploit-framework/modules</p>
<p>1.搜索模块</p>
<p>search brute_dirs,dir_scanner等</p>
<p>search是命令，后边跟的是子弹。这条命令的含义是寻找子弹的路径。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search brute_dirs //找到brute_dirs路径</span><br><span class="line">use auxiliary/scanner/http/brute_dirs //子弹上膛</span><br><span class="line">&gt;show options//查看模块涉及的参数</span><br></pre></td></tr></table></figure>
<p>Name:参数的名字 Current Setting:当前设置值</p>
<p>Required:布尔型，yes表示当前参数必须有值，no可以没有值     description:对参数的解释</p>
<p><strong>brute_dirs</strong></p>
<p>brute_dirs的几个参数:<br>RHOSTS 远程主机 带s说明既可以设置一个地址也可以设置一个地址段  RHOSTS的required值为yes说明必须设置值，不能为空</p>
<p>RPORT 对方(要收集信息的服务器)的端口</p>
<p><code>&gt;set rhosts 192.168. .</code>设置使用set 设置rhosts</p>
<p>通过nmap扫描该ip 发现其在80端口有http服务，故RPORT不同修改 使用默认值80即可</p>
<p><code>run 或者 exploit//子弹发射(进行目录扫描)</code> 一般为了节省时间使用run  结果的多少和字典大小有关</p>
<p><strong>dir_scanner</strong></p>
<p>如果要换子弹需要把当前的退出 <code>&gt;back</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">search dir_scanner</span><br><span class="line">use xxx/xx/xx/scanner</span><br><span class="line">&gt;show options</span><br></pre></td></tr></table></figure>
<p>set threads 10 线程大并发高攻击速度快，但被发现的概率高</p>
<h4 id="邮件地址搜集"><a href="#邮件地址搜集" class="headerlink" title="邮件地址搜集"></a>邮件地址搜集</h4><h5 id="1-搜索引擎"><a href="#1-搜索引擎" class="headerlink" title="1.搜索引擎"></a>1.搜索引擎</h5><p>例如:搜索河北师大相关邮箱</p>
<p>搜索@hebtu.edu.cn 但不是完全准确的</p>
<h5 id="2-metasploit-search-email-collector模块"><a href="#2-metasploit-search-email-collector模块" class="headerlink" title="2.metasploit search_email_collector模块"></a>2.metasploit search_email_collector模块</h5><p>参数 domain:邮箱的域(hebtu.edu.cn)</p>
<p>但这个模块不管用，搜索机制是用微软的BING、GOOGLE、YAHOO 但都是外网，国内地址无法使用</p>
<h5 id="3-theHarvester"><a href="#3-theHarvester" class="headerlink" title="3.theHarvester"></a>3.theHarvester</h5><p>可以指定搜索引擎</p>
<p>从搜索引擎 (baidu、yahoo)中的前200项搜索结果中挖掘目标域里的电子邮件地址和主机名</p>
<p>从搜索引擎 (baidu、yahoo)中的前200项搜索结果中挖掘目标域里的电子邮件地址和主机名</p>
<p>theHarvester -d hebtu.edu.cn -l 200 -b baidu</p>
<p>usage:<img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210322233537441.png" alt="image-20210322233537441"></p>
<p>此处-b 后加搜索引擎域名 注意不要加.com(完整域名)</p>
<h5 id="4-邮箱地址查找工具—snovio"><a href="#4-邮箱地址查找工具—snovio" class="headerlink" title="4.邮箱地址查找工具—snovio"></a>4.邮箱地址查找工具—snovio</h5><p>功能非常强大，可以使用google插件也可以使用网址</p>
<p><a href="https://app.snov.io/login" target="_blank" rel="noopener">https://app.snov.io/login</a></p>
<h4 id="拓扑确定"><a href="#拓扑确定" class="headerlink" title="拓扑确定"></a>拓扑确定</h4><p>侦察目标的网络拓扑结构，用于找到薄弱点实施入侵</p>
<h5 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h5><ul>
<li><p>向目标主机发送不同生存时间(TTL)的ICMP、TCP或UDP报文来确定到达目标主机的路由</p>
</li>
<li><p>交换节点可能装有包过滤机制，ICMP、TCP和UDP报文都可能被过滤</p>
</li>
<li><p>traceroute [-4] { -I | -T | -U} [-w 等待时间] [-p 端口] [-m 最大跳数]</p>
</li>
</ul>
<p>traceroute查看发送出去的探测数据包经过哪些路由器</p>
<p>例如<code>traceroute www.hebtu.edu.cn</code></p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210323000301211.png" alt="image-20210323000301211"></p>
<p>traceroute默认情况下向目标发送三个数据报 ip地址后跟着的三个时间是三个数据报的往返时间</p>
<p>第二跳显示* 是因为第二跳经过的路由器会把发过去的数据报过滤，收不到对方服务器做的响应，所以没法把路由器的地址打印出来</p>
<p>第五跳有三个路由器的地址，因为每个数据报发出去以后，都是可以单独路由，走不同的路径。</p>
<h4 id="社会工程学"><a href="#社会工程学" class="headerlink" title="社会工程学"></a>社会工程学</h4><p>通过操纵人来实施某些行为或泄露机密信息的攻击方法，实际是对人的欺骗</p>
<h5 id="Maltego"><a href="#Maltego" class="headerlink" title="Maltego"></a><strong>Maltego</strong></h5><ul>
<li><p>高度自动化的信息收集工具</p>
</li>
<li><p>收集域名服务器、IP地址、子域或个人信息</p>
</li>
<li><p>跨平台</p>
</li>
<li><p>信息可视化</p>
</li>
</ul>
<p>在kali左上方搜索选择 01-Information Gathering中的maltego</p>
<p>Run maltego CE版本-&gt;www.maltego.com/ce-registration进行注册(外网)</p>
<p>左上角新建-&gt;在实体模版搜索Domain-&gt;修改域名(例如hbu.edu.cn)-&gt;上方菜单栏点击machines-&gt;Run Machine（会给多种搜索方法，越往下级别越高，速度越慢） 搜索该域名的拓扑结构</p>
<p>如果打算对某一个目标进一步分析 在某个图标点击右键会出现进一步跟踪</p>
<h5 id="Zenmap"><a href="#Zenmap" class="headerlink" title="Zenmap"></a><strong>Zenmap</strong></h5><p>nmap的图形使用接口，集成traceroute功能(支持ICMP、TCP和UDP追踪)</p>
<p>在windows安装nmap后会有图标 Zenmap</p>
<p>把配置中扫描方式改为Quick traceroute扫描</p>
<p>还是可以查看到路由信息(拓扑结构)</p>
<h4 id="网络监听"><a href="#网络监听" class="headerlink" title="网络监听"></a>网络监听</h4><p>一种被动的信息收集方法，往往不会被目标察觉</p>
<p>最佳位置是网关、路由器和防火墙</p>
<p><strong>截获SMTP(发电子邮件用到的协议)、HTTP、FTP、POP3(收邮件用的协议)和TELNET等网络协议报文，因为它们明文传输</strong></p>
<p>http明文传输不安全，使用https较安全</p>
<h5 id="1-Cain-amp-Abel"><a href="#1-Cain-amp-Abel" class="headerlink" title="1.Cain&amp;Abel"></a>1.Cain&amp;Abel</h5><p>局域网账号口令收集和破解工具，截取各种常见网络协议的账号和口令</p>
<p>安装WinPcap抓包工具实现cain启动</p>
<p>1）扫描网段存活主机</p>
<p>先点击网卡图标，选择Sniffer，右键选择扫描MAC地址。<strong>用于扫描当前网段中存活主机</strong>，扫描时把协议都选上</p>
<p>扫描网段时自己的ip不显示</p>
<p>2）ARP</p>
<p>点击下方栏ARP，右键Remove all,点击上号加号，对刚才扫描出的地址进行监听。</p>
<p>监听的目标左侧选网关，右侧选要监听的目标。</p>
<p>在地址段中的网关要么是.1要么是.254,几乎所有的管理员都这么使用。(.0代表网络不能使用，.255是广播地址)</p>
<p>可以同时检测多个ip。</p>
<p>3)ARP毒化</p>
<p>点击上方任务栏黄色图标，开始毒化。</p>
<p>status变成Poisoning</p>
<p>假设被监听的主机在使用网络服务，如使用ftp下载文件或者登录后台(http)</p>
<p>点击下方passwords 可以监听到某ftp服务器 登录账密</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210323231417714.png" alt="image-20210323231417714"></p>
<p>以上类型都能监听到。使用场景:商场的公用免费wifi,添加多条记录监听主机行为。如果使用明文传输的服务，可以监听记录下来。</p>
<h5 id="2-局域网的嗅探-ettercap-driftnet"><a href="#2-局域网的嗅探-ettercap-driftnet" class="headerlink" title="2.局域网的嗅探 ettercap+driftnet"></a>2.局域网的嗅探 ettercap+driftnet</h5><p>1）driftnet</p>
<p>图片和MPEG音频收集工具，实时从各种网络协议中<strong>提取图片数据或MPEG音频</strong></p>
<p>Kali2020.1 不支持driftnet，需要手动安装</p>
<p>Kali2020.1原有源地址无法更新，需要修改</p>
<p>driftnet [-m 指定抓取图片数量 -a] [-S] [-d 指定存放目录名] [BPF过滤器]</p>
<p>原理:</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210323231853606.png" alt="image-20210323231853606"></p>
<p>主机B为被攻击方，主机要上网必须设置网关(网关就是路由器的一个ip地址)。主机B要上网不仅需要知道路由器ip地址，还要知道路由器的MAC地址。</p>
<p>主机B把数据帧发给网关(路由器的入口)，网关把数据包再交给主机B上网的目标。</p>
<p>主机A为攻击方，主机A向B发送大量数据包告诉主机B，网关的MAC发生了变化。欺骗主机B将A变成网关，主机<em>B</em>在对外传输数据时，便将数据传送给假网关—主机<em>A</em>，主机<em>A</em>就可以窃听分析主机<em>B</em>的数据包。</p>
<p>利用<em>driftnet</em>软件窃听数据，就可以看到主机<em>B</em>所浏览的内容。</p>
<p>2）局域网欺骗攻击(ARP欺骗，流量经过自己网卡，再从网关出去)</p>
<p><strong>arpspoof—arp攻击工具</strong></p>
<p>apt-get install dsniff ssldump</p>
<p>用法:</p>
<p>arpspoof -i 自己网卡 -t 目标IP 网关</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt;/proc/sys/net/ipv4/ip_forward (流量转发)//改成1 存到ip_forward中</span><br><span class="line">arpspoof   -i eth0 -t 目标    网关</span><br><span class="line">driftnet -i eth0 看着捕获的图片</span><br><span class="line">ettercap -Tq -i eth0进行账号密码嗅探（可能）</span><br></pre></td></tr></table></figure>
<p>如果流量转发这条没有，会造成目标的断网，无法达到监听目的。ip_forward文件路径为/proc/sys/net/ipv4</p>
<p><code>cat ip_forward</code> 默认情况下是0 即流量转发不打开</p>
<p>ifconfig查看网卡名称 要让所有的流量经过kali的网卡</p>
<p><code>arpspoof   -i eth0 -t 目标    网关</code> 这一步的目的是向被害方发送大量ARP包，告诉受害方当前网关的MAC地址发生了变化。(即ARP毒化)  <strong>终端挂起，不要终止</strong></p>
<p><code>driftnet -i eth0</code>监听kali的网卡 可以抓到对方上网过程中的图片（只能抓图片，有一定延迟） 并会把图片存下来</p>
<p><code>ettercap -Tq -i eth0</code> 可能抓到登录账密</p>
<p>3）Ettercap</p>
<p>调用图形化方式     <code>Ettercap -G</code></p>
<p>Sniffing at startup(和cain一样，用于监听)</p>
<p>下一行选择监听网卡 点上方对号后点击上方三个点</p>
<p>Host-&gt;Scan for hosts(进行扫描)-&gt;点击三个点-&gt;Host-&gt;Host list</p>
<p>随后操作相同 把监听的目标设成taret1 把网关设成target2</p>
<p>进行ARP毒化，MITM menu-&gt;ARP poisoning</p>
<p>同样需要driftnet</p>
<h5 id="3-p0f"><a href="#3-p0f" class="headerlink" title="3.p0f"></a>3.p0f</h5><p>分析网络数据包来<strong>判断目标主机操作系统类型</strong>、网络地址转换(NAT)、负载均衡设置、应用代理</p>
<p>以及用于检测对方的上网的行为(浏览了一些什么网站)</p>
<p>手动安装<code>apt-get install p0f</code></p>
<p>同样需要先打开流量转发，否则对方上不了网</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> 1 &gt;/proc/sys/net/ipv4/ip_forward (流量转发)</span><br><span class="line">arpspoof   -i eth0 -t 目标     网关</span><br><span class="line">p0f 新终端运行</span><br></pre></td></tr></table></figure>
<p>先做arp毒化再运行p0f</p>
<p>p0f [-p] [-i 指定接口] [BPF过滤器]</p>
<p>浏览一个网站会接收到很多响应</p>
<h5 id="4-ferret"><a href="#4-ferret" class="headerlink" title="4.ferret"></a>4.ferret</h5><p>提取各类协议报文关键字段，适用于<strong>窃取cookie和HTTP会话信息</strong></p>
<p>cookie是进行身份认证时，输入的账号和口令转换成特定的字符串就是cookie。如果被截获，虽然不知道账号和口令，但依然能用你的身份登录。</p>
<h2 id="class4"><a href="#class4" class="headerlink" title="class4"></a>class4</h2><p>IP:网络层地址 MAC:数据链路层地址</p>
<h3 id="网络隐身-1"><a href="#网络隐身-1" class="headerlink" title="网络隐身"></a>网络隐身</h3><h4 id="IP地址欺骗"><a href="#IP地址欺骗" class="headerlink" title="IP地址欺骗"></a>IP地址欺骗</h4><p>原因: TCP/IP路由机制只检查报文<strong>目标地址(目的地址)</strong>的有效性，可以定制虚假的源IP地址<br>➢IP欺骗(IP Spoofing)<br>    ➢利用主机间的正常信任关系，通过修改IP报文中的源地址，以绕开主机或网络访问控制<br>➢C与A在同一LAN(在同一网段)中，IP欺骗比较容易<br>➢C与A在不同LAN中，UDP欺骗比较容易</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325081142446.png" alt="image-20210325081142446"></p>
<p>如果有大量C冒充A，B会向A发送大量响应，会导致A宕机或拒绝服务。同理，B也会因为资源耗尽拒绝服务。</p>
<p>如果A与B建立TCP连接进行通信，C实施IP欺骗就非常困难。</p>
<p>IP欺骗过程</p>
<ul>
<li><p>使A停止工作</p>
</li>
<li><p>猜测初始序列号</p>
<p>基于时间</p>
<p>随机增加</p>
<p>固定不变</p>
</li>
<li><p>建立欺骗连接</p>
</li>
</ul>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325081634587.png" alt="image-20210325081634587"></p>
<p>在TCP报文段中的序号 主机B每建立连接，序号就会发生变化</p>
<p>C向B发送报文 采样和猜测初始序号ISN</p>
<p>B收到第一次握手请求后，B会向A发送第二次握手</p>
<p>猜测第二次握手序号是第一次握手序号+1</p>
<p>第三次握手确认号为猜测的ISN+1</p>
<p>成功的前提是通信主机之间仅凭IP地址标识对方身份，并且攻击者可以正确猜测TCP连接的初始序列号(ISN)</p>
<p>防范措施</p>
<ul>
<li><p>使用基于加密的协议如IPSec或SSH进行通信</p>
</li>
<li><p>通信时使用口令或证书进行身份验证</p>
</li>
<li><p>使用随机化的ISN</p>
</li>
<li><p>在路由器上配置包过滤策略，检测报文的源IP地址是否属于网络内部地址</p>
</li>
<li><p>不要使用基于IP地址的信任机制</p>
</li>
</ul>
<h4 id="MAC地址欺骗—突破基于MAC地址的局域网访问控制"><a href="#MAC地址欺骗—突破基于MAC地址的局域网访问控制" class="headerlink" title="MAC地址欺骗—突破基于MAC地址的局域网访问控制"></a>MAC地址欺骗—突破基于MAC地址的局域网访问控制</h4><p>1.基于MAC的访问控制</p>
<p>交换机仅转发源MAC地址在预定义的访问列表中的报文</p>
<p>2.基于IP和MAC的访问控制</p>
<p>仅转发(P,MAC)地址对在访问列表中的报文，IP和MAC必须都在访问列表中</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325082938436.png" alt="image-20210325082938436"></p>
<p>3.修改MAC地址的方法</p>
<p>知道局域网中能上网的A的MAC地址，可以修改为A的MAC地址冒充A上网</p>
<p>MAC地址48bit,前24bit代表公司，后24bit为序号。二者组织起来保证全球唯一性。ROM为主存寄存器，MAC地址写在ROM中，不可改变。故硬修改不太现实。</p>
<p>软修改</p>
<p>网卡驱动程序从系统中读取地址信息并写入网卡的硬件存储器</p>
<p>硬修改</p>
<p>修改网卡硬件ROM中存储的原有地址</p>
<p>4.Windows系统修改MAC网卡</p>
<p>物理机中用到的方法</p>
<p>本地属性-网络客户端-配置-高级-网络地址 修改MAC地址</p>
<p>虚拟机中用到的方法</p>
<p>计算机-&gt;属性-&gt;设备管理器-&gt;网络适配器(这就是网卡的名字)-&gt;详细信息-&gt;驱动程序关键字 复制</p>
<p>进到注册表(regedit)-&gt;点击查找 搜索4d36c972-c325-1cc-bfc 1-08002bc103 18(网卡标识符，即主机上网时用到的网卡相关的配置)-&gt;展开后有多个子文件夹 说明有多种上网方式-&gt;打开0007 DriverDesc(驱动器的描述)  其值就是当前上网网卡-&gt;在0007右键新建字符串值(子键) 命名Networkaddress 随意填写数字12个十六进制(MAC地址48位)为MAC地址</p>
<p>网卡先禁用再启用</p>
<p>windows查看mac地址 ipconfig/all</p>
<p>5.Linux系统修改MAC</p>
<p><strong>ifconfig</strong></p>
<p>ifconfig ether参数代表MAC地址 </p>
<p>先禁用网卡 <code>ifconfig eth0 down</code></p>
<p><code>ifconfig eth0 hw ether 000c2969da99</code>  hw代表hardwire（硬件）</p>
<p><code>ifconfig eth0 up</code></p>
<p>修改后上网不受影响</p>
<p><strong>macchanger</strong></p>
<p>使用前需要先安装</p>
<p>用法: macchanger 选项 eth0</p>
<p>-p: 复位到原来的永久硬件</p>
<p>-a:设置同类的<strong>随机供应商</strong>MAC</p>
<p>-A:设置任意类型的<strong>随机供应商</strong>MAC</p>
<p>-r:设置完全随机的MAC</p>
<p>6.问题</p>
<p><strong>如果局域网中有两台在线的主机具有相同的MAC地址，它们是否能同时正常通信?</strong></p>
<p>目前局域网内联网都采用星型方式(交换机)</p>
<p>交换机有很多端口，每一个端口都是没有地址的，而路由器的端口都有自己的MAC地址。交换机中的CAM表中的值是它连接设备的MAC地址</p>
<p>根据交换机的工作机制(CAM)，两台主机无法同时通信。假设主机A和B的MAC地址都是MAC_ AB，而A连接交换机的端口1，B连接交换机的端口2。</p>
<p>当A和B同时发送报文时，端口地址表中记录的MAC_ AB只会有1条记录。那么当其它主机给A或者B发送报文时，如果端口地址表中记录的是端口2，那么A不会收到报文，如果记录的是端口1，那么B不会收到报文。</p>
<p>类似同一本书不能同时给两个人看。</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325090153427.png" alt="image-20210325090153427"></p>
<h4 id="网络地址转换-NAT"><a href="#网络地址转换-NAT" class="headerlink" title="网络地址转换(NAT)"></a>网络地址转换(NAT)</h4><p>将私有地址转换为公有IP地址的技术，<strong>对终端用户透明</strong>(用户不需要知道具体细节)</p>
<h5 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h5><p>A:0.0.0.0-127.255.255.255  </p>
<p>在A类地址中 10.0.0.0-10.255.255.255 是私有地址</p>
<p>127.0.0.0-127.255.255.255 私有地址</p>
<p>B:128.0.0.0-191.255.255.255 </p>
<p>172.16.0.0-172.31.255.255 私有地址</p>
<p>C:192.0.0.0-223.255.255.255 </p>
<p>192.168.0.0-192.168.255.255 私有地址</p>
<p>D:多播 224-239 E:保留 240-255</p>
<p>私有地址是不能被路由的，可以在局域网中使用。公有地址是可路由的，由国际化组织分配给某些国家某些地址段。</p>
<p>配置私有地址需要进行转换为公有地址。</p>
<h5 id="转换方式"><a href="#转换方式" class="headerlink" title="转换方式"></a>转换方式</h5><p>1.静态转换<br>可实现外网到内网的映射，有专门的地址表</p>
<p>将内网的私有IP地址转换为公有IP地址，转换方式是一对一且固定不变</p>
<p>2.动态转换<br>可用于没有传输层的IP报文，如OSPF路由报文</p>
<p>谁用到网络谁获得一个临时的对外地址，用完后其他用户请求时会重用这个对外地址</p>
<p>内网的私有IP地址转换为公用IP地址时，NAT会从公用IP地址池中随机选择一 个</p>
<p>3.端口地址转换PAT<br>共享一个IP，只能适用于基于UDP/TCP的网络通信</p>
<p>既改变外出报文的IP地址，也改变报文的端口</p>
<p>例如:对外地址只有一个，内部200台电脑，在ip地址加上端口对每个主机发出的数据报进行区分</p>
<h5 id="地址转换表"><a href="#地址转换表" class="headerlink" title="地址转换表"></a>地址转换表</h5><p>静态表项在配置后即固定不变(静态转换)</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325110114439.png" alt="image-20210325110114439"></p>
<p>有一个静态一一对应的地址表(黄圈中)  内部主机要访问服务器，数据报经过重新封装  路由器查表做简单的ip地址替换  </p>
<p>动态表项在每次会话新建立后保持不变</p>
<p>动态不光会替换ip,还会替换端口。</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325110630054.png" alt="image-20210325110630054"></p>
<p>内部主机很多，但可用的地址池不多，所以端口也发生了改变。</p>
<h4 id="代理隐藏"><a href="#代理隐藏" class="headerlink" title="代理隐藏"></a>代理隐藏</h4><p>不直接与目标主机通信，而是通过代理服务器间接地与目标主机通信，相当于一个中介</p>
<p>列举出一些可用代理 :www.kuaidaili.com</p>
<p>代理服务器</p>
<p>将内网与外网隔离</p>
<p>正向代理</p>
<p>正向代理的过程，隐藏了<strong>真实的请求客户端</strong>，服务端不知道真实的客户端是谁，客户端请求的服务都被代理服务器代替来请求。</p>
<p>反向代理</p>
<p>反向代理隐藏了<strong>真实的服务端</strong>，反向代理服务器会把请求转发到真实的服务器那里去。</p>
<h5 id="正向代理—翻墙软件"><a href="#正向代理—翻墙软件" class="headerlink" title="正向代理—翻墙软件"></a><strong>正向代理</strong>—<strong>翻墙软件</strong></h5><p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325093905185.png" alt="image-20210325093905185"></p>
<p>正向代理的用途：</p>
<ul>
<li><p>访问原来无法访问的资源，如google；</p>
</li>
<li><p>可以做缓存，加速访问资源；</p>
</li>
<li><p>对客户端访问授权，上网进行认证；</p>
</li>
<li><p>代理可以记录用户访问记录，对外隐藏用户信息。</p>
</li>
</ul>
<h5 id="反向代理—Nginx-服务器"><a href="#反向代理—Nginx-服务器" class="headerlink" title="反向代理—Nginx 服务器"></a>反向代理—Nginx 服务器</h5><p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325094231071.png" alt="image-20210325094231071"></p>
<p>你对百度的请求发给了server1 还是server2 由域名的服务器来完成。反向代理隐藏了后边的内容。</p>
<p>很类似的:你打10086 实际给你解决问题的是某个工作人员，但接听之前你并不知道接待你的客服是哪个。</p>
<p>反向代理的作用：</p>
<ul>
<li><p>保证内网的安全，阻止web攻击，大型网站，将反向代理作为公网访问地址，Web服务器使用私有地址</p>
</li>
<li><p>负载均衡，通过反向代理服务器来优化网站的负载</p>
</li>
</ul>
<h5 id="正向代理和反向代理区别"><a href="#正向代理和反向代理区别" class="headerlink" title="正向代理和反向代理区别"></a>正向代理和反向代理区别</h5><p>正向代理即是客户端代理, 代理客户端, 服务端不知道实际发起请求的客户端.</p>
<p>反向代理即是服务端代理, 代理服务端, 客户端不知道实际提供服务的服务端</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210325094639035.png" alt="image-20210325094639035"></p>
<h5 id="透明代理"><a href="#透明代理" class="headerlink" title="透明代理"></a>透明代理</h5><p>透明:用户使用起来在终端不用进行任何操作，就和不存在一样像和服务器直接通信，但实际是存在的</p>
<ul>
<li><p>通常放置在网关位置</p>
</li>
<li><p>客户机向目标发起请求</p>
</li>
<li><p>代理主机自动建立与服务器的连接</p>
</li>
<li><p>转发客户请求并接收应答</p>
</li>
<li><p>最后转发给客户</p>
</li>
<li><p>工作在传输层或应用层</p>
</li>
</ul>
<h5 id="常用代理"><a href="#常用代理" class="headerlink" title="常用代理"></a>常用代理</h5><p>HTTP代理</p>
<p><strong>主要作用是代理浏览器访问WEB服务器，端口一般为80、8080</strong></p>
<p>SSL代理</p>
<p><strong>代理访问<a href="https://开头的WEB网站，SSL的标准端口为443" target="_blank" rel="noopener">https://开头的WEB网站，SSL的标准端口为443</a></strong></p>
<p>HTTP CONNECT代理</p>
<p>用户向代理发起HTTP CONNECT请求，代理为用户建立连接到目标的任何端口</p>
<p>HTTP TUNNEL代理</p>
<p>与HTTP CONNECT代理类似，但是转发隧道报文，通常是加密的SSL通信</p>
<p>FTP代理</p>
<p><strong>代理FTP客户机软件访问FTP服务器，其端口一般为21、2121</strong></p>
<p>POP3代理</p>
<p><strong>代理邮件客户机软件用POP3协议收邮件，其端口一般为110</strong></p>
<p>Telnet代理</p>
<p><strong>代理Telnet客户程序访问Telnet服务器，用于远程控制和管理，其端口一般为23</strong></p>
<p>Socks代理</p>
<p><strong>防火墙安全会话转换协议，介于应用层和传输层之间的“中介层”，其标准端口为1080</strong></p>
<p>Socks4只支持TCP应用，而Socks5可支持TCP和UDP两种应用。</p>
<p><strong>如何使用代理</strong></p>
<p>http: google 设置-&gt;高级-&gt;局域网设置-&gt;代理服务器-&gt;代理ip 端口号 </p>
<p>sock:设置-&gt;高级-&gt;局域网设置-&gt;代理服务器-&gt;套接字</p>
<p>代理服务器使用自行查找</p>
<h5 id="OWASP-ZAP"><a href="#OWASP-ZAP" class="headerlink" title="OWASP ZAP"></a>OWASP ZAP</h5><p>免费WEB安全扫描器，集成HTTP和HTTPS的代理服务器，仅支持正向代理功能</p>
<p>apt-get install zaproxy</p>
<p>zaproxy //运行</p>
<p>点击上方菜单栏Tools-&gt;Local Proxies（用来搭建本地http/https代理） -&gt;地址改为kali的ip,不能写localhost(127.0.0.1)，localhost私有地址别人无法使用，端口默认8080或者自行修改</p>
<p>使用另个设备通过Kali搭建的服务器上网，火狐-&gt;选项-&gt;网络设置-&gt;手动设置代理服务器(http/https代理都可以使用) ,看使用的浏览器能否上网确认代理是否成功</p>
<h5 id="CCProxy"><a href="#CCProxy" class="headerlink" title="CCProxy"></a>CCProxy</h5><p>国内出品的Windows代理软件，支持正向和反向代理</p>
<p>安装ccproxy 默认安装-&gt;破解ccproxy</p>
<p>破解:选择离线注册 复制特征码到破解工具machine ID处generate</p>
<p> 使用:<br>设置中使用了多种代理方式，例如选择http,填写自己的ip</p>
<p>为了安全可以在账号管理中只对某些人开放或对所有开放(对所有人开放采用匿名访问)</p>
<p>做了修改后先停用再重启，使配置生效</p>
<p>使用http/https  代理服务器上CCProxy记录哪个机器访问了哪个网站</p>
<p>因为需要用户在浏览器设置，所以不是透明代理</p>
<h5 id="proxychains"><a href="#proxychains" class="headerlink" title="proxychains"></a>proxychains</h5><p>ProxyChains可以使任何程序通过代理上网， 允许TCP和DNS通过代理隧道， 支持HTTP、 SOCKS4和SOCKS5类型的代理服务器， 并且可配置多个代理。</p>
<p> 只有一级代理，对用户隐藏的并不好。如果有多级代理，对用户来说相对安全。</p>
<p>ProxyChains 支持多个代理组成链式访问：</p>
<p>your_host &lt;—&gt; proxy 1 &lt;—&gt; proxy 2 (HTTP or SOCKS4/5) &lt;—&gt; target_host</p>
<p>使用跨不同国家(对上网法律不同)，对请求方来说是安全的。</p>
<p><strong>配置:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/proxychains.conf //在proxychains配置文件中添加多个代理的IP和端口</span><br></pre></td></tr></table></figure>
<p>dynamic_chain 动态链</p>
<p>写出多个代理 动态在里面进行选择</p>
<p>strict_chain</p>
<p>严格的按照你写出代理的顺序进行代理</p>
<p>还有一种随机的代理</p>
<p>proxy_dns 进行注释，我们使用自己代理的dns</p>
<p>在ProxyList写出代理列表</p>
<p>格式: 代理方式  ip 端口</p>
<p>例如</p>
<p>Proxy List:</p>
<p>https  192.168. .  808  (CCProxy)</p>
<p>http 192.168.3.75 8888(ZAP)</p>
<p>注意设置浏览器为不使用代理(把之前设置的删掉)</p>
<p><strong>用法：</strong></p>
<p>proxychains curl <a href="http://www.baidu.com/" target="_blank" rel="noopener">www.baidu.com</a> //curl 文件传输</p>
<p>curl:把对方的页面存成文件</p>
<p>proxychains wget 目标</p>
<p>wget:用文本方式访问网站</p>
<p>proxychains firefox <a href="http://www.baidu.com/" target="_blank" rel="noopener">www.baidu.com</a></p>
<p>firefox:用火狐浏览器访问目标</p>
<p><strong>涉及到需要证书的(https需要)不太好用，在http比较好使用</strong>  </p>
<h2 id="class4-1"><a href="#class4-1" class="headerlink" title="class4"></a>class4</h2><h3 id="网络扫描-1"><a href="#网络扫描-1" class="headerlink" title="网络扫描"></a>网络扫描</h3><p>基于网络的远程服务发现和系统脆弱点检测的一种技术。</p>
<p><strong>基于主机的扫描</strong></p>
<p>被动式策略或系统安全扫描</p>
<p>运行在被扫描主机之上，对系统中错误的配置、脆弱的口令和其它不符合安全策略的设置进行检测</p>
<p><strong>基于网络的扫描</strong></p>
<p>主动式策略</p>
<p>向远程主机发送探测数据包，获取响应数据包并对其进行解码分析，从而发现网络或主机的各种漏洞</p>
<h4 id="Nmap"><a href="#Nmap" class="headerlink" title="Nmap"></a>Nmap</h4><p>功能:躲避防火墙、主机发现、端口扫描、版本侦测、操作系统侦测、Nmap脚本搜索引擎</p>
<h5 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h5><p>用于发现目标主机是否在线（Alive，处于开启状态）</p>
<p>与Ping命令类似，发送探测包到目标主机，若收到回复，说明目标主机是开启的。多种主机探测方式，比如发送ICMP ECHO/ TIMESTAMP /NETMASK报文、发送TCP SYN/ACK包、发送SCTP INIT/COOKIE-ECHO包。</p>
<p>我们平时使用的ping就是使用了ICMP的ECHO REQUEST报文。</p>
<p>用法:</p>
<ul>
<li><p>-sL: List Scan 列表扫描，仅将指定的目标的IP列举出来，不进行主机发现。 </p>
<p>(扫描列表，把扫描的地址段列出来，但主机存不存活不显示，在日常生活中基本不用)</p>
</li>
<li><p>-sn: Ping Scan <strong>只进行主机发现</strong>，不进行端口扫描。 </p>
</li>
<li><p>-Pn: 跳过主机发现而进行端口扫描等高级操作。 </p>
</li>
<li><p>-PS/PA/PU/PY[portlist]: 使用TCP SYN/ACK或SCTP INIT/ECHO方式进行主机发现。(用的选项不一样，结果也会有所不同) </p>
</li>
<li><p>-PO[protocollist]: 使用IP协议包探测对方主机是否开启。 </p>
</li>
<li><p>-n/-R: -n表示不进行DNS解析；-R表示总是进行DNS解析。 </p>
</li>
<li><p>—dns-servers <serv1[,serv2],...>: 指定DNS服务器。 </serv1[,serv2],...></p>
</li>
<li><p>—system-dns: 指定使用系统的DNS服务器 </p>
</li>
<li><p>—traceroute: 追踪每个路由节点(一些节点路由器不显示ip是因为路由器限制了报文的通过，做了过滤)</p>
</li>
</ul>
<h5 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h5><p>TCP从0-65535共六万多个端口。其中一些为特定服务提供，大部分是动态的。端口扫描是Nmap最基本最核心的功能，用于确定目标主机的TCP/UDP端口的开放情况。 默认情况下，Nmap会扫描1000个最有可能开放的TCP端口。</p>
<p>两种扫描方式:TCP端口扫描(全连接扫描(Connect扫描)、半连接扫描(SYN扫描)、FIN扫描、ACK扫描、NULL扫描、TCP窗口扫描、自定义扫描)/UDP端口扫描</p>
<h6 id="常用端口"><a href="#常用端口" class="headerlink" title="常用端口"></a>常用端口</h6><p>端口:一个服务点，位于传输层和应用层之间。通过端口和应用层的一些协议连接起来。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>服务</strong></th>
<th><strong>端口号</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTP</td>
<td>80</td>
</tr>
<tr>
<td>HTTPS</td>
<td>443</td>
</tr>
<tr>
<td>Telnet</td>
<td>23</td>
</tr>
<tr>
<td>FTP</td>
<td>21</td>
</tr>
<tr>
<td>SSH（安全登录）</td>
<td>22</td>
</tr>
<tr>
<td>SMTP</td>
<td>25</td>
</tr>
<tr>
<td>POP3</td>
<td>110</td>
</tr>
<tr>
<td>WebLogic</td>
<td>7001</td>
</tr>
<tr>
<td>TOMCAT</td>
<td>8080</td>
</tr>
<tr>
<td>WIN2003远程登录</td>
<td>3389</td>
</tr>
<tr>
<td>Oracle数据库</td>
<td>1521</td>
</tr>
<tr>
<td>MS SQL* SEVER数据库sever</td>
<td>1433</td>
</tr>
<tr>
<td>MySQL 数据库sever</td>
<td>3306</td>
</tr>
</tbody>
</table>
</div>
<h6 id="端口状态"><a href="#端口状态" class="headerlink" title="端口状态"></a>端口状态</h6><div class="table-container">
<table>
<thead>
<tr>
<th><strong>Open</strong></th>
<th><strong>端口是开放的</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Closed</td>
<td>端口是关闭的</td>
</tr>
<tr>
<td>filtered</td>
<td>端口被防火墙IDS/IPS屏蔽，无法确定其状态</td>
</tr>
<tr>
<td>unfiltered</td>
<td>端口没有被屏蔽，但是否开放需要进一步确定</td>
</tr>
<tr>
<td><strong>open</strong>\</td>
<td>filtered</td>
<td>端口是开放的或被屏蔽</td>
</tr>
<tr>
<td>closed\</td>
<td>filtered</td>
<td>端口是关闭的或被屏蔽</td>
</tr>
</tbody>
</table>
</div>
<h6 id="TCP扫描"><a href="#TCP扫描" class="headerlink" title="TCP扫描"></a>TCP扫描</h6><p>1.TCP协议格式</p>
<p>主要介绍六个特殊字段，都占有一个比特位</p>
<p>URG:紧急数据指针。等于1指针字段有效。</p>
<p>ACK:应答  PSH:数据推送方式 RST:复位 SYN:同步，建立连接时用 FIN:终止连接</p>
<p>2.SYN扫描</p>
<p>（-sS）半开放扫描</p>
<p><strong>一般使用半开放SYN扫描</strong></p>
<p>发送SYN到目标端口，如果收到SYN/ACK回复，端口是开放的；正常情况第三次握手回送ACK，但因为是半开放扫描,直接复位中断连接（图1）</p>
<p>如果收到RST包，说明该端口是关闭的。（图2）</p>
<p>如果<strong>没有收到回复</strong>，判断该端口被屏蔽（Filtered，防火墙）。</p>
<p>仅发送SYN包到目标主机的特定端口，不建立的完整的TCP连接，相对比较隐蔽，效率比较高，适用范围广。 </p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210328082613234.png" alt="image-20210328082613234">使用wireshark抓包过滤条件 进行分析</p>
<p>ip.addr\==目标 and ip.addr\==自己 and tcp.port==扫描端口</p>
<p>3.TCP扫描</p>
<p>（-sT）全扫描  三次握手</p>
<p>使用系统网络API connect向目标主机的端口发起连接，如果无法连接，说明该端口关闭（如无防火墙，回复RST，图1；有防火墙，什么也收不到，图2）。能建立连接，则端口打开，完成三次握手后断开连接（图3）</p>
<p>故若能建立连接，wireshark抓包应该是四个报文</p>
<p>该方式扫描速度比较慢，而且由于<strong>建立完整的TCP连接会在目标机上留下记录信息</strong>，不够隐蔽。</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210328084155187.png" alt="image-20210328084155187"></p>
<p>4.ACK扫描</p>
<p>向目标主机的端口发送ACK包，如果收到RST包，说明该端口没有被防火墙屏蔽（用于判断防火墙设置，图1）</p>
<p>没有收到RST包，说明被屏蔽。（图2）</p>
<p><strong>只能用于确定防火墙是否屏蔽某个端口，可以辅助TCP SYN的方式来判断目标主机防火墙的状况。</strong></p>
<p>ACK扫描端口多时不会都列出来。</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210328084716109.png" alt="image-20210328084716109"></p>
<p>5.TCP FIN/Xmas/NULL scanning   </p>
<p>三种秘密扫描</p>
<p>分别向目标主机的端口发送的TCP FIN包或Xmas tree包/Null包。</p>
<p>如果收到对方RST回复包，则该端口是关闭的；（图1）</p>
<p>没有收到RST包说明端口可能是开放的或被屏蔽的（open|filtered）。（图2） </p>
<p>Xmas tree包是指flags中FIN URG PUSH被置为1的TCP包；NULL包是指所有flags都为0的TCP包。</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210328085132062.png" alt="image-20210328085132062"></p>
<p>这个理论与实践有出入，做实验时观察。(21端口开放却收到RST包)</p>
<p>6.自定义TCP扫描包</p>
<p>—scanflags</p>
<p>定制一个包含ACK扫描和SYN扫描的扫描包</p>
<p>nmap —scanflags SYNURG 目标IP</p>
<h6 id="UDP扫描"><a href="#UDP扫描" class="headerlink" title="UDP扫描"></a>UDP扫描</h6><p>UDP端口也是0-65535范围。但时间较长，因为扫描对方全部六万端口。</p>
<p>向目标主机的UDP端口发送探测包，如果收到回复“ICMP port unreachable”就说明该端口是关闭的；（图1）</p>
<p>如果没有收到回复，那说明UDP端口可能是开放的或屏蔽的。（图2）</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210328085808188.png" alt="image-20210328085808188"></p>
<p>注意区分 wireshark抓包时源也向目的发出了 端口不可达。看清源与目的</p>
<h6 id="扫描方法"><a href="#扫描方法" class="headerlink" title="扫描方法"></a>扫描方法</h6><p>-sS/sT/sA/sW:指定使用 TCP SYN/Connect()(全连接扫描)/ACK/Window(滑动窗口扫描)方式来对目标主机进行扫描。 </p>
<p>-sU: 使用UDP扫描方式确定目标主机的UDP端口。 </p>
<p> -sN/sF/sX: 指定使用TCP Null, FIN, and Xmas scans秘密扫描方式来协助探测对方的TCP端口状态。</p>
<p> -sF   不受防火墙和IDS的限制</p>
<p> —scanflags <flags>: 定制TCP包的flags。  </flags></p>
<p> -sY/sZ: 使用SCTP INIT/COOKIE-ECHO来扫描SCTP协议端口的开放的情况。 </p>
<p> -sO: 使用IP protocol 扫描确定目标机支持的协议类型。 </p>
<p> -b <FTP relay host>: 使用FTP bounce scan扫描方式</FTP></p>
<h6 id="端口参数与扫描顺序"><a href="#端口参数与扫描顺序" class="headerlink" title="端口参数与扫描顺序"></a>端口参数与扫描顺序</h6><p>-p <port ranges>: 扫描指定的端口 </port></p>
<p>​     实例: -p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9（其中T代表TCP协议、U代表UDP协议、S代表SCTP协议） </p>
<p>查看地址段中哪些主机用到了你熟悉攻击的服务<code>nmap -sS 192.168.3.72/25 -p80,21,445</code>扫描多个端口时用逗号隔开    </p>
<p>-F: Fast mode – 快速模式，仅扫描TOP 100的端口 </p>
<p> -r: 按端口有序扫描（<strong>如无该参数，随机顺序方式扫描端口</strong>）。 </p>
<p> —top-ports <number>:扫描开放概率最高的number个端口。默认情况下，nmap会扫描最有可能的1000个TCP端口）</number></p>
<p> —port-ratio <ratio>: 扫描指定频率以上的端口。参数必须在在0到1之间。</ratio></p>
<h6 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h6><p>不要随意Nmap目标。nmap已经入了刑法，许多单位把端口扫描视为恶意行为，测试Nmap最好在内部网络进行。如有必要，应该告诉同事你正在试验端口扫描，因为扫描可能引发IDS警报以及其他网络问题。</p>
<p>对于管理员来说，定期进行扫描，关闭不必要的服务。根据Nmap提供的报告，关闭不必要的服务，或者调整路由器的访问控制规则（ACL），禁用网络开放给外界的某些端口。</p>
<h5 id="版本扫描"><a href="#版本扫描" class="headerlink" title="版本扫描"></a>版本扫描</h5><p>确定目标主机开放端口上运行的具体的应用程序及版本信息，不同版本对应的漏洞类型不同。</p>
<p>•首先检查open与open|filtered状态的端口是否在排除端口列表内。如果在排除列表，将该端口剔除。</p>
<p>•如果是TCP端口，尝试建立TCP连接。接收到目标机发送的“WelcomeBanner”信息（相当于身份）。nmap将接收到的Banner与nmap-services-probes(nmap的签名库)中的签名进行对比。查找对应应用程序的名字与版本信息。</p>
<p>•如果是UDP端口，那么直接使用nmap-services-probes中探测包进行探测匹配。根据结果对比分析出UDP应用服务类型。</p>
<p>-sV: 指定让Nmap进行版本侦测  </p>
<p>nmap  -sV 目标</p>
<p>不加任何选项: port state service</p>
<p>加sV选项要比不加时间长，因为要将Banner和自己的库进行比对</p>
<h5 id="扫描操作系统类型"><a href="#扫描操作系统类型" class="headerlink" title="扫描操作系统类型"></a>扫描操作系统类型</h5><p>利用系统数据库nmap-os-db，可以识别2600多种操作系统与设备类型。</p>
<p>原理:</p>
<p>利用TCP/IP协议栈指纹来识别不同的操作系统和设备。</p>
<p>分别挑选一个open和closed的端口，向其发送经过精心设计的TCP/UDP/ICMP数据包，根据返回的数据包生成一份系统指纹。</p>
<p>将探测生成的指纹与nmap-os-db中指纹进行对比，查找匹配的系统。<strong>如果无法匹配，以概率形式列举出可能的系统。</strong></p>
<p>-O: 指定Nmap进行OS侦测</p>
<h5 id="假冒扫描"><a href="#假冒扫描" class="headerlink" title="假冒扫描"></a>假冒扫描</h5><p>修改扫描的源。</p>
<p>•nmap -e eth0 -S 源IP地址 IP地址</p>
<p>同时使用被扫主机wireshark抓包，查看源ip是否被修改。在扫描主机wireshark上抓包，也显示伪造ip</p>
<p>•namp -D IP地址1,IP地址2,…,ME IP地址</p>
<p>使用一个地址池 ME指kali地址(在命令中写ME即可)，使用这些地址对目标进行扫描。这样做的目的是虽然有日志记录，溯源时不知道哪个ip是扫描源。用逗号进行分割</p>
<p>•nmap —data-length 垃圾数据长度 IP地址</p>
<p>常规扫描的数据包是特定数据长度的。</p>
<p>通过在发送的数据包末尾添加随机的垃圾数据，以达到混淆视听的作效果。</p>
<p>•nmap —randomize-hosts IP地址段 </p>
<p>打乱扫描顺序，以规避检测系统的检测。</p>
<p>不涉及假冒源，扫描一个地址段，如果加上这个选项，扫描时无序，不会引起管理员的注意。</p>
<h3 id="Unicornscan扫描"><a href="#Unicornscan扫描" class="headerlink" title="Unicornscan扫描"></a>Unicornscan扫描</h3><p>apt-get install unicornscan</p>
<h4 id="TCP-SYN扫描"><a href="#TCP-SYN扫描" class="headerlink" title="TCP SYN扫描"></a>TCP SYN扫描</h4><p>unicornscan -v -I 目标  v详细输出；I立即执行</p>
<p>不加-v没有端口 信息</p>
<h4 id="特定协议的扫描"><a href="#特定协议的扫描" class="headerlink" title="特定协议的扫描"></a>特定协议的扫描</h4><p>unicornscan -mT 目标(T代表TCP)</p>
<p>扫描模式是默认的TCP（SYN）扫描，</p>
<ul>
<li><p>U表示UDP -mU</p>
</li>
<li><p>T表示TCP连接扫描</p>
</li>
<li><p>A表示ARP</p>
</li>
</ul>
<h4 id="指定端口的扫描"><a href="#指定端口的扫描" class="headerlink" title="指定端口的扫描"></a>指定端口的扫描</h4><p>unicornscan  -mT -v -I [IP地址]/24:端口</p>
<h3 id="Metasploit之扫描"><a href="#Metasploit之扫描" class="headerlink" title="Metasploit之扫描"></a>Metasploit之扫描</h3><p>msfconsole</p>
<p>search portscan(搜索出八个模块)</p>
<p>use auxiliary/scanner/postscan/tcp</p>
<p>show options(默认扫描端口1-10000)</p>
<p>set rhosts 地址段或地址</p>
<p>run</p>
<h3 id="WEB漏洞扫描工具"><a href="#WEB漏洞扫描工具" class="headerlink" title="WEB漏洞扫描工具"></a>WEB漏洞扫描工具</h3><h4 id="nikto"><a href="#nikto" class="headerlink" title="nikto"></a>nikto</h4><p>对WEB服务器程序(目标网站)进行已知漏洞扫描</p>
<p>集成著名的WEB程序漏洞扫描插件</p>
<p>apt-get install nikto</p>
<p>漏洞类型:</p>
<p><img src="/2021/06/06/%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/image-20210331122822518.png" alt="image-20210331122822518"></p>
<p>使用时加载不同的扫描模块，即前面的漏洞类型</p>
<p>nikto -host 192.168.3.44 -T(加载扫描策略) 23456789</p>
<h4 id="skipfish"><a href="#skipfish" class="headerlink" title="skipfish"></a>skipfish</h4><ul>
<li><p>与nikto等工具有相似的功能</p>
</li>
<li><p>占用较低的CPU资源，运行速度比较快</p>
</li>
</ul>
<p>apt-get install skipfish</p>
<p>也有具体扫描的模块</p>
<p>skipfish —checks 查看帮助以及对应漏洞类型</p>
<p>skipfish -o text <a href="http://192.168.1.101" target="_blank" rel="noopener">http://192.168.1.101</a> -o输出到文件</p>
<p>在控制台中查看Issue found  1warn 2low(低危) 无详细信息</p>
<h2 id="class7-Burpsuite暴力破解"><a href="#class7-Burpsuite暴力破解" class="headerlink" title="class7 Burpsuite暴力破解"></a>class7 Burpsuite暴力破解</h2><p>wamp</p>
<ul>
<li>wordpass omp/root</li>
<li>数据库 phpadmin root/root</li>
</ul>
<p>phpstudy</p>
<ul>
<li>数据库 phpadmin root/root</li>
<li>dvwa  admin  ？        </li>
</ul>
<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p>相对于wampserver,phpstudy轻量级，适用于小型应用</p>
<h4 id="wamp"><a href="#wamp" class="headerlink" title="wamp"></a>wamp</h4><p>同一端口配多个网站 则放到wamp64/www下 每个网站创建一个目录</p>
<p>网站主页对应为 www文件夹下的index.php</p>
<p>同一端口访问多个网站直接url加入子文件夹名</p>
<p>使用phpmyadmin进行配置数据库(IE打不开 不能进行后续操作) 默认 root/空 (本机数据库账密root/root)</p>
<p>账户-&gt;修改数据库用户密码  新建一个数据库(wordpress登录时需要)</p>
<p>不同端口搭建网站 配置httpd.conf(http协议进程) Listen 0.0.0.0:端口(ipv4) 设置不同端口号</p>
<p>配置httpd-vhosts.conf  修改端口和DocumentRoot</p>
<p>配置文件修改后 重启wamp的所有服务</p>
<h4 id="dvwa"><a href="#dvwa" class="headerlink" title="dvwa"></a>dvwa</h4><p>对dvwa/config下文件 config.inc.php进行修改</p>
<p>修改数据库名 数据库用户名 数据库密码</p>
<p>default_secutiry_level 修改安全等级为low</p>
<p>进入dvwa先进行安装 setup.php</p>
<p>对环境变量进行检查 若出现红色 进行相应修改 如修改php.ini相应值</p>
<p>创建数据库 Create Database</p>
<p>解决其他主机不能访问网站问题:</p>
<p>打开apache的httpd.conf httpd-vhosts.com</p>
<p>把Required all denied loacal改为 Require all granted </p>
<h3 id="WPScan"><a href="#WPScan" class="headerlink" title="WPScan"></a>WPScan</h3><p>专门扫描WordPress漏洞的黑盒子扫描器</p>
<p>可以通过插件/主题漏洞进行渗透</p>
<p>目录扫描</p>
<p>wpscan —url 检测到的WordPress</p>
<p>枚举用户</p>
<p>wpscan —url url —enumerate u</p>
<p>使用字典</p>
<p>wpscan —url url —enumerate u -P 字典路径</p>
<p>搜索主题</p>
<p>wpscan —url url —enumerate t(主题)</p>
<p>发现主题有漏洞</p>
<p>wpscan —url url —enumerate vt(主题)</p>
<p>注意:此处kali连不上物理机是因为防火墙问题(虚拟机不能ping物理机,物理机能ping虚拟机)，关闭即可</p>
<h3 id="CMS扫描"><a href="#CMS扫描" class="headerlink" title="CMS扫描"></a>CMS扫描</h3><p>Content Manager System(内容管理系统) 即后台</p>
<h4 id="cmseek"><a href="#cmseek" class="headerlink" title="cmseek"></a>cmseek</h4><p>cmseek apt-get install cmseek</p>
<p>www.exploit-db.com 查看各CMS漏洞</p>
<p>用法: cmseek</p>
<p>输入网址进行检测CMS类型</p>
<h3 id="burpsuite"><a href="#burpsuite" class="headerlink" title="burpsuite"></a>burpsuite</h3><p>PC机向服务器发送请求，服务器进行响应</p>
<p>burpsuite在客服端和服务器之间添加代理，用户请求不是直接发给服务器，被本地代理拦截。代理做完操作，再把包发送给服务器</p>
<p>服务器响应给代理，代理同意后再转发给客户端。正向代理</p>
<h4 id="proxy模块"><a href="#proxy模块" class="headerlink" title="proxy模块"></a>proxy模块</h4><p>需要把包放行给服务器 forward</p>
<p>不想放行或不相关 drop</p>
<p>修改浏览器本地代理端口以及burp-&gt;proxy-&gt;options代理端口</p>
<p>最好使用不常用的端口 而不是web服务常用的8080</p>
<p>BP开启时需要抓包时 拦截开启(Intercept On) 不需要抓包时 拦截禁用;禁用时不影响上网行为</p>
<p>BP关闭时 若浏览器还设置本地代理 则无法上网</p>
<h4 id="暴力破解"><a href="#暴力破解" class="headerlink" title="暴力破解"></a>暴力破解</h4><p>1.破解口令</p>
<p>抓到包后右键发送给Intruder(测试器)</p>
<p>对可变化的值设置$(先clear再add)</p>
<p>Attack type Sniper</p>
<p>字典中每一行填入password配合username逐条发送至服务器</p>
<p>Intruder-&gt;Payloads-&gt;Load 加载字典</p>
<p>Options 设置请求线程…</p>
<p>右上角start attack</p>
<p>返回结果能进行访问都是200</p>
<p>通过Length(响应长度)查看口令正确性</p>
<p>也可以根据服务器响应信息(错误提示)</p>
<p>Options-&gt;Match-&gt;Clear-&gt;Add 服务器返回错误提示 返回结果可以看到没有错误提示的信息</p>
<p>2.破解用户与口令</p>
<p>Intruder 对用户密码进行$选中</p>
<p><strong>Attack type </strong></p>
<ul>
<li><p>Sniper针对的场景是只有一个变量</p>
</li>
<li><p>Battering ram 针对两个变量 但是两个变量(用户名和口令)共用一个字典</p>
</li>
<li><p>Pitchfork(鱼叉式) 用于两个变量(?多个) 两个字典 </p>
<p>但两个字典之间是相互对应的</p>
<p>user1对应pass1 user2对应pass2 多余的舍弃 只按照最少的字典长度对服务器进行请求</p>
</li>
<li><p>ClusterBomb(交叉式)</p>
<p>user1对所有pass进行遍历</p>
<p>user2对所有pass进行遍历</p>
<p>….</p>
</li>
</ul>
<p>按顺序加载字典 PayloadSet 加载两个字典</p>
<h4 id="网络环境"><a href="#网络环境" class="headerlink" title="网络环境"></a>网络环境</h4><p>即使在本机上做实验，也不要使用127.0.0.1</p>
<p>因为127.0.0.1不经过代理 使用私有ip地址代替回环地址抓包</p>
<p>教师机地址及服务端口</p>
<p>192.168.20.253:82</p>
<p>虚拟机设置为桥接后 设置同一网段即可</p>
<p>验证码在抓包本次请求一定要输对</p>
<p>在本次抓包时验证码是不改变的 对用户名和密码就可以进行暴力破解</p>
<h4 id="Tomcat实验"><a href="#Tomcat实验" class="headerlink" title="Tomcat实验"></a>Tomcat实验</h4><p>如果需要自己搭建环境，使用低版本的tomcat7之前的(tomcat新版有登陆限制)</p>
<p>通过Tomcat中的大马进行RCE</p>
<p>扫描端口 开放远程连接端口3389</p>
<p>开启后建立账号并提权</p>
<p>远程连接到靶机提取本地管理员账号</p>
<p>远程cmd中进入QuarksPwDump.exe -dhl</p>
<p>可以得到本地账号密码的哈希值</p>
<p>使用网站在线破解md5或hashcat破解其本地管理员账号</p>
<h5 id="Basic认证"><a href="#Basic认证" class="headerlink" title="Basic认证"></a>Basic认证</h5><p>Burp中Intercept Server Respones中勾选拦截从服务器到客户端的信息 显示服务器的响应包</p>
<p>401未认证 放行响应包后进行后续操作</p>
<p>抓到登录请求包中没有看到输入的账号密码 但实际已经包含在请求包基本认证basic中(见ppt)</p>
<p>使用base64编码处理 在Decoder中选择base64即可</p>
<p>对于认证中的信息进行爆破:</p>
<p>发送给intruder</p>
<p>把编码部分加上$</p>
<p>payload中选择custom iterator(自定义迭代)</p>
<p>position1 加载用户名字典</p>
<p>position2 输入连接符:<br>position3 加载口令字典</p>
<p>在payload processing中add Encode Base64-encode</p>
<p>并且取消勾选有效载荷编码:URL编码这些字符</p>
<p>option中线程一定要改成1</p>

      
    </div>
    
      
    
  </section>
</article>

          </div>
        
      
    
  </section>
  
    
    <!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
    
    

  


	
</div>
<aside class='l_side'>
  
  
    
    

<section class="widget blogger shadow desktop mobile">
  <div class='content'>
    
      
        <a class='avatar flat-box' href='/about/'>
          <img no-lazy src='https://s3.ax1x.com/2021/01/03/spRpoq.jpg'/>
        </a>
      
    
    
      <div class='text'>
        
        
        
          <p><span id="jinrishici-sentence">omp's blog</span></p>
          <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
        
      </div>
    
    
      <div class="social-wrapper">
        
          
            <a href="/atom.xml"
              class="social fas fa-rss flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="mailto:me@xaoxuu.com"
              class="social fas fa-envelope flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://github.com/xaoxuu"
              class="social fab fa-github flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=63035382"
              class="social fas fa-headphones-alt flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
      </div>
    
  </div>
</section>

  

  
    
    
  

  <section class="widget category shadow desktop">
    
  <header>
    
      <a href='/blog/categories/'><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i><span class='name'>文章分类</span></a>
    
  </header>


    <div class='content'>
      <ul class="entry navigation">
        
          <li><a class="flat-box"
            title="/categories/Paper-reading/" href="/categories/Paper-reading/"
            id="categoriesPaper-reading"
            ><div class='name'>Paper reading</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/crypto%E5%88%B7%E9%A2%98/" href="/categories/crypto%E5%88%B7%E9%A2%98/"
            id="categoriescryptoE588B7E9A298"
            ><div class='name'>crypto刷题</div><div class='badge'>(8)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/java/" href="/categories/java/"
            id="categoriesjava"
            ><div class='name'>java</div><div class='badge'>(3)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/web%E5%88%B7%E9%A2%98/" href="/categories/web%E5%88%B7%E9%A2%98/"
            id="categorieswebE588B7E9A298"
            ><div class='name'>web刷题</div><div class='badge'>(8)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/%E5%85%B6%E4%BB%96/" href="/categories/%E5%85%B6%E4%BB%96/"
            id="categoriesE585B6E4BB96"
            ><div class='name'>其他</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
            id="categoriesE5ADA6E4B9A0E7AC94E8AEB0"
            ><div class='name'>学习笔记</div><div class='badge'>(3)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/" href="/categories/%E5%AF%86%E7%A0%81%E5%AD%A6/"
            id="categoriesE5AF86E7A081E5ADA6"
            ><div class='name'>密码学</div><div class='badge'>(4)</div></a></li>
        
          <li><a class="flat-box"
            title="/categories/%E6%9D%82%E9%A1%B9/" href="/categories/%E6%9D%82%E9%A1%B9/"
            id="categoriesE69D82E9A1B9"
            ><div class='name'>杂项</div><div class='badge'>(3)</div></a></li>
        
      </ul>
    </div>
  </section>


  

  
    
    
  

  <section class="widget tagcloud shadow desktop mobile">
    
  <header>
    
      <a href='/blog/tags/'><i class="fas fa-tags fa-fw" aria-hidden="true"></i><span class='name'>热门标签</span></a>
    
  </header>


    <div class='content'>
      <a href="/tags/AES/" style="font-size: 17.33px; color: #828282">AES</a> <a href="/tags/DL/" style="font-size: 17.33px; color: #828282">DL</a> <a href="/tags/DLP/" style="font-size: 17.33px; color: #828282">DLP</a> <a href="/tags/ECC/" style="font-size: 14px; color: #999">ECC</a> <a href="/tags/RC4/" style="font-size: 14px; color: #999">RC4</a> <a href="/tags/RSA/" style="font-size: 20.67px; color: #6c6c6c">RSA</a> <a href="/tags/bot/" style="font-size: 14px; color: #999">bot</a> <a href="/tags/crt/" style="font-size: 14px; color: #999">crt</a> <a href="/tags/flask/" style="font-size: 14px; color: #999">flask</a> <a href="/tags/http/" style="font-size: 14px; color: #999">http</a> <a href="/tags/java/" style="font-size: 20.67px; color: #6c6c6c">java</a> <a href="/tags/knapsack/" style="font-size: 14px; color: #999">knapsack</a> <a href="/tags/mt19937/" style="font-size: 14px; color: #999">mt19937</a> <a href="/tags/php%E4%BC%AA%E5%8D%8F%E8%AE%AE/" style="font-size: 14px; color: #999">php伪协议</a> <a href="/tags/php%E5%BC%B1%E7%B1%BB%E5%9E%8B/" style="font-size: 14px; color: #999">php弱类型</a> <a href="/tags/sql%E6%B3%A8%E5%85%A5/" style="font-size: 24px; color: #555">sql注入</a> <a href="/tags/ssti/" style="font-size: 17.33px; color: #828282">ssti</a> <a href="/tags/stream/" style="font-size: 14px; color: #999">stream</a> <a href="/tags/tornado/" style="font-size: 14px; color: #999">tornado</a> <a href="/tags/%E6%89%A9%E5%B1%95CRT/" style="font-size: 14px; color: #999">扩展CRT</a> <a href="/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" style="font-size: 14px; color: #999">文件包含</a> <a href="/tags/%E6%9D%82%E9%A1%B9/" style="font-size: 20.67px; color: #6c6c6c">杂项</a> <a href="/tags/%E6%BA%90%E7%A0%81%E6%B3%84%E9%9C%B2/" style="font-size: 14px; color: #999">源码泄露</a> <a href="/tags/%E7%BC%96%E7%A0%81/" style="font-size: 14px; color: #999">编码</a>
    </div>
  </section>


  

  


</aside>


  
  <footer class="clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js
      theme='#1BCDFC'
      autoplay='false'
      volume='0.7'
      loop='all'
      order='list'
      fixed='false'
      list-max-height='340px'
      server='netease'
      type='playlist'
      id='5004192906'
      list-folded='true'>
    </meting-js>
  


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="/atom.xml"
                class="social fas fa-rss flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="mailto:me@xaoxuu.com"
                class="social fas fa-envelope flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://github.com/xaoxuu"
                class="social fab fa-github flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://music.163.com/#/user/home?id=63035382"
                class="social fas fa-headphones-alt flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
        </div>
      
    
      
        <div><p>Blog content follows the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License</a></p>
</div>
      
    
      
        Use
        <a href="https://volantis.js.org/" target="_blank" class="codename">Volantis</a>
        as theme, total visits
          <span id="busuanzi_value_site_pv"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
          times
        
      
    
      
        <div class='copyright'>
        <p><a href="https://xaoxuu.com" target="_blank" rel="noopener">Copyright © 2017-2020 Mr. X</a></p>

        </div>
      
    
  </footer>

<script>setLoadingBarProgress(80);</script>




	<!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
	

	


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '8px',
        duration: '800',
        interval: '100',
        scale: '1'
      });
    });
  </script>


  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://gitee.com/wallpapers/minimalist/raw/master/2020/001.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/002.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/003.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/004.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/005.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/006.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/007.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/008.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/009.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/010.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/011.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/012.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/013.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/014.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/015.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/016.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/017.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/018.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/019.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/020.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/021.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/022.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/023.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/024.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/025.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/026.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/027.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/028.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/029.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/030.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/031.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/032.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/033.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/034.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/035.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/036.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/037.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/038.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/039.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/040.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/041.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/042.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/043.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/044.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/045.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/046.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/047.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/048.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/049.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/050.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/051.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/052.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/053.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/054.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/055.jpg", "https://gitee.com/wallpapers/minimalist/raw/master/2020/056.jpg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('') {
          $('').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script>

  









  
    
<script src="https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"></script>

  
  <script>
  var GUEST_INFO = ['nick','mail','link'];
  var meta = 'nick,mail,link'.split(',').filter(function(item){
    return GUEST_INFO.indexOf(item) > -1
  });
  var REQUIRED_FIELDS = ['nick','mail','link'];
  var requiredFields = 'nick,mail'.split(',').filter(function(item){
    return REQUIRED_FIELDS.indexOf(item) > -1
  });
  var valine = new Valine();
  function emoji(path, idx, ext) {
      return path + "/" + path + "-" + idx + "." + ext;
  }
  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }
  valine.init({
    el: '#valine_container',
    meta: meta,
    
    appId: "dogUA2FSKGTo029M1SEwGROT-MdYXbMMI",
    appKey: "u0NdtQ8nvHoMdJPSYqm1LRxE",
    placeholder: "快来评论吧~",
    pageSize:'10',
    avatar:'robohash',
    lang:'zh-cn',
    visitor: 'true',
    highlight: 'true',
    mathJax: 'true',
    enableQQ: 'true',
    requiredFields: requiredFields,
    emojiCDN: 'https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/emoji/valine/',
    emojiMaps: emojiMaps
  })
  </script>





  
<script src="/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.5/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>






<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-check-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-check-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-times-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-times-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>




<!-- fancybox -->

  <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("div.fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>






  <script>setLoadingBarProgress(100);</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="/node_modules/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"node_modules/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/node_modules/assets/miku.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":false},"react":{"opacity":0.7},"log":false});</script></body>
</html>
